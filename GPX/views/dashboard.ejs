<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/dashboard.css' />
</head>

<body>

    <%- include('partials/header') %>

        <div class="container dashboard-container">

            <div class="balance-card">
                <div class="balance-info">
                    <h2>Tu balance üëÅÔ∏è</h2>
                    <% if (locals.user && user.balance) { %>
                        <div class="balance-amount">
                            <%= user.balance.btc %> BTC ‚åÑ
                        </div>
                        <div class="balance-fiat">
                            <%= user.balance.eur %> ‚Ç¨
                        </div>
                        <% } else { %>
                            <div class="balance-amount">
                                0.00000000 BTC ‚åÑ
                            </div>
                            <div class="balance-fiat">
                                0.00 ‚Ç¨
                            </div>
                            <% } %>
                </div>
                <div class="action-buttons">
                    <a href="/deposit" class="btn btn-action primary">Depositar</a>
                    <button class="btn btn-action">Retirar</button>
                </div>
            </div>

            <!-- Chart placeholder line -->
            <div class="chart-placeholder">
                <svg width="100%" height="50">
                    <path d="M0,50 Q100,20 200,40 T400,30 T600,45 T800,10 T1000,30 T1200,50" fill="none"
                        stroke="#ff9900" stroke-width="2" />
                </svg>
            </div>

            <h3 class="section-title">Mis activos</h3>

            <table class="assets-table">
                <thead>
                    <tr>
                        <th>Mis activos</th>
                        <th>Precio de la moneda</th>
                        <th>Cambio en 24h</th>
                        <th>Operar</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (locals.assets && assets.length> 0) { %>
                        <% assets.forEach(function(asset) { %>
                            <tr>
                                <td>
                                    <div class="coin-name">
                                        <span class="coin-icon" data-color="<%= asset.icon_color || '#333' %>"></span>
                                        <%= asset.name %>
                                    </div>
                                </td>
                                <td>
                                    <%= asset.price_eur %> ‚Ç¨
                                </td>
                                <td class="<%= asset.change_24h >= 0 ? 'text-green' : 'text-red' %>">
                                    <%= asset.change_24h>= 0 ? '+' : '' %><%= asset.change_24h %> %
                                </td>
                                <td><a href="#" class="text-primary">Operar</a></td>
                            </tr>
                            <% }); %>
                                <% } else { %>
                                    <tr>
                                        <td colspan="4" class="empty-state">No tienes activos.</td>
                                    </tr>
                                    <% } %>
                </tbody>
            </table>

            <div class="news-grid">
                <div class="news-card">
                    <div class="news-meta">Hace 10 minutos</div>
                    <div class="news-title">SoFi Technologies eleva su previsi√≥n...</div>
                    <div class="news-excerpt">Seg√∫n BlockBeats, SoFi Technologies ha aumentado su previsi√≥n de
                        beneficios anuales...</div>
                </div>
                <div class="news-card">
                    <div class="news-meta">Hace 18 minutos</div>
                    <div class="news-title">SharpLink invertir√° $200 millones en ETH...</div>
                    <div class="news-excerpt">Seg√∫n PANews, SharpLink ha anunciado una colaboraci√≥n con ether.fi...
                    </div>
                </div>
            </div>

        </div>

        <%- include('partials/footer') %>

            <script>
                // Apply dynamic colors to coin icons
                document.querySelectorAll('.coin-icon[data-color]').forEach(icon => {
                    icon.style.background = icon.getAttribute('data-color');
                });
            </script>

</body>

</html>